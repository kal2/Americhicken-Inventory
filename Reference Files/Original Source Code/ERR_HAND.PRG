SELECT E
USE ERRORS
DO FILELOCK
APPEND BLANK
REPLACE ERRDATE WITH DATE()
REPLACE ERRTIME WITH TIME()
REPLACE ERRNUM WITH ERROR()
REPLACE ERRMESS WITH MESSAGE()
STORE MESSAGE() TO MPROB
REPLACE SOURCE WITH MESSAGE(1)
SUB = 1
DO WHILE LEN(SYS(16,SUB)) <> 0
   SUB = SUB + 1
ENDDO
REPLACE PROGRAM WITH SYS(16,SUB-2)
STORE SYS(16,SUB-2) TO MCALLING
UNLOCK
CLEAR
STORE 'THERE IS A PROBLEM WITH THE PROGRAM!' TO MMSG
STORE 'WRITE DOWN THE TIME AND CALL GRACE OR DON' TO MMSG1
STORE 'PRESS ANY KEY TO CONTINUE' TO MMSG2
      

@ 09,05 GET MMSG
@ 11,05 GET MMSG1
@ 13,05 GET MMSG
@ 15,05 SAY '  ERROR: ' + MPROB
@ 16,05 SAY 'PROGRAM: ' + MCALLING
CLEAR GETS
WAIT ' '
CLOSE DATA
RETURN TO MASTER
