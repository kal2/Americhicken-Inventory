**********
* Program.: SHORTBIL.PRG
* Author..: Grace Keller
* Date....: 03/08/88
* Notice..: Copyright 1987, Solid Software, Inc., All Rights Reserved
* Version.: FOXPRO
* Notes...: ENTER ITEM BILLER PRICES
*
RELEASE MQTY
RELEASE MFR_FZ
RELEASE MGRADE
RELEASE MPAK  
RELEASE MCLASS
RELEASE MPROD
RELEASE MSIZE
RELEASE MPACKSPEC
RELEASE MLBS
RELEASE MPURC_PRI
RELEASE MSELL_PRI
RELEASE MPURC_TOT
RELEASE MSELL_TOT
RELEASE MSHRT_BOX
RELEASE MSHRT_LBS
RELEASE MBILL_PRI
RELEASE MPAK1  
RELEASE MPAK2  
RELEASE MBOX_SZ
RELEASE MOLD_LOT
RELEASE MOLD_LBS
RELEASE MOLD_QTY
RELEASE MOLD_PROD
RELEASE MIN_LOT
RELEASE MOUT_LOT
RELEASE MOLD_IN
RELEASE MOLD_OUT
RELEASE MSTOR_ITEM
RELEASE MPAK_YR
RELEASE MPAK_DAY
RELEASE Mold_YR
RELEASE Mold_DAY

DIMENSION MQTY(7)
DIMENSION MFR_FZ(7)
DIMENSION MGRADE(7)
DIMENSION MPAK(7)  
DIMENSION MCLASS(7)
DIMENSION MPROD(7)
DIMENSION MSIZE(7)
DIMENSION MPACKSPEC(7)
DIMENSION MLBS(7)
DIMENSION MPURC_PRI(7)
DIMENSION MSELL_PRI(7)
DIMENSION MPURC_TOT(7)
DIMENSION MSELL_TOT(7)
DIMENSION MSHRT_BOX(7)
DIMENSION MSHRT_LBS(7)
DIMENSION MBILL_PRI(7)
DIMENSION MPAK1(7)  
DIMENSION MPAK2(7)  
DIMENSION MBOX_SZ(7)
DIMENSION MOLD_LOT(7)
DIMENSION MOLD_LBS(7)
DIMENSION MOLD_QTY(7)
DIMENSION MOLD_PROD(7)
DIMENSION MIN_LOT(7)
DIMENSION MOUT_LOT(7)
DIMENSION MOLD_IN(7)
DIMENSION MOLD_OUT(7)
DIMENSION MSTOR_ITEM(7)
DIMENSION MPAK_YR(7)
DIMENSION MPAK_DAY(7)
DIMENSION Mold_YR(7)
DIMENSION Mold_DAY(7)

@ 8,0 CLEAR TO 22,79
@ 24,0 CLEAR
STORE 1 TO MACTION
@ 24,0 SAY 'Action: ' + STR(MACTION,1)
@ 24,12 SAY '1. Finished with Item Edit      2. Edit Screen'
SELECT C
GOTO MUPDRCD(MNBR_ITM)

** MTOT = ROUND((LBS+SHRT_LBS) * PUR_PRICE,2) - round(SHRT_LBS * PUR_PRICE,2)
MTOT = TOT_PURCH     

MACTION = 2
STORE BILL_PRI TO MPRICE

DO WHILE MACTION = 2   
   
   @ 9,1 SAY MQTY(MNBR_ITM) PICTURE '9999'
   @ 9,6 SAY MFR_FZ(MNBR_ITM) PICTURE '@!'
   @ 9,09 SAY MGRADE(MNBR_ITM) PICTURE '@!'
   @ 9,11 SAY MPAK(MNBR_ITM) PICTURE '@!'
   @ 9,14 SAY MPROD(MNBR_ITM) PICTURE '@!'
   @ 9,25 SAY MSIZE(MNBR_ITM) PICTURE '@!'
   @ 9,31 SAY MPACKSPEC(MNBR_ITM) PICTURE '@!'
   @ 9,36 SAY MLBS(MNBR_ITM) PICTURE '999999.99'
   IF MPRICE = 0
      @ 9,46 SAY PUR_PRICE PICTURE '99.9999'
      STORE TOT_PURCH TO MPURC_TOT(MNBR_ITM)
   ELSE
      @ 9,46 SAY MPRICE PICTURE '99.9999'
      
      MVAL1 = (LBS + SHRT_LBS) * MPRICE
      MVAL2 = SHRT_LBS * MPRICE
      IF MVAL1 <> 0
         MVAL = INT(MVAL1*100)
         IF (ABS(MVAL1) * 100) - ABS(MVAL) > .49
            IF MVAL1 >= 0
               MVAL1 = (MVAL + 1) / 100
            ELSE
               MVAL1 = (MVAL - 1) / 100
            ENDIF
         ELSE
            MVAL1 = MVAL / 100
         ENDIF
      ENDIF
      IF MVAL2 <> 0
         MVAL = INT(MVAL2*100)
         IF (ABS(MVAL2) * 100) - ABS(MVAL) > .49
            IF MVAL2 >= 0
               MVAL2 = (MVAL + 1) / 100
            ELSE
               MVAL2 = (MVAL - 1) / 100
            ENDIF
         ELSE
            MVAL2 = MVAL / 100
         ENDIF
      ENDIF
      
      MPURC_TOT(MNBR_ITM) = MVAL1 - MVAL2
   ENDIF
   
   @ 9,54 SAY MSELL_PRI(MNBR_ITM) PICTURE '99.9999'
   @ 9,62 SAY MPURC_TOT(MNBR_ITM) PICTURE '99999.99'
   @ 9,71 SAY MSELL_TOT(MNBR_ITM) PICTURE '99999.99'
   @ 10,0 TO 10,79
   @ 12,02 SAY 'BILLED PURCHASE PRICE'
   @ 13,07 GET MPRICE PICTURE '##.####'  
   @ 12,40 SAY 'BILLING ADJUSTMENT'
   IF MPRICE <> 0
      MDIFF = MPURC_TOT(MNBR_ITM) - MTOT
      @ 13,43 SAY MDIFF PICTURE '######.##'
   ENDIF
   READ
   
   IF MPRICE <> 0
      *** MPURC_TOT(MNBR_ITM) = round((LBS + SHRT_LBS) * MPRICE,2) - round(SHRT_LBS * MPRICE,2)
      MVAL1 = (LBS + SHRT_LBS) * MPRICE
      MVAL2 = SHRT_LBS * MPRICE
      IF MVAL1 <> 0
         MVAL = INT(MVAL1*100)
         IF (ABS(MVAL1) * 100) - ABS(MVAL) > .49
            IF MVAL1 >= 0
               MVAL1 = (MVAL + 1) / 100
            ELSE
               MVAL1 = (MVAL - 1) / 100
            ENDIF
         ELSE
            MVAL1 = MVAL / 100
         ENDIF
      ENDIF
      IF MVAL2 <> 0
         MVAL = INT(MVAL2*100)
         IF (ABS(MVAL2) * 100) - ABS(MVAL) > .49
            IF MVAL2 >= 0
               MVAL2 = (MVAL + 1) / 100
            ELSE
               MVAL2 = (MVAL - 1) / 100
            ENDIF
         ELSE
            MVAL2 = MVAL / 100
         ENDIF
      ENDIF
      
      MPURC_TOT(MNBR_ITM) = MVAL1 - MVAL2
      MDIFF = MPURC_TOT(MNBR_ITM) - MTOT
      STORE MPRICE TO MPURC_PRI(MNBR_ITM)
      STORE MPURC_TOT(MNBR_ITM) TO MTOT_BILL
      @ 13,43 SAY MDIFF PICTURE '######.##'
      @ 9,46 SAY MPRICE PICTURE '99.9999'
      @ 9,62 SAY MPURC_TOT(MNBR_ITM) PICTURE '99999.99'
   ELSE
      STORE 0 TO MDIFF, MTOT_BILL
      @ 9,46 SAY PUR_PRICE PICTURE '99.9999'
      STORE TOT_PURCH TO MPURC_TOT(MNBR_ITM)
      STORE PUR_PRICE TO  MPURC_PRI(MNBR_ITM)
      @ 9,47 SAY PUR_PRICE PICTURE '9.9999'
      @ 9,62 SAY MPURC_TOT(MNBR_ITM) PICTURE '99999.99'
      @ 13,43 SAY MDIFF PICTURE '######.##'
   ENDIF
   STORE 1 TO MACTION
   @ 24,8 GET MACTION PICTURE '#' RANGE 1,2
   READ
ENDDO
DO RECLOCK
REPLACE BILL_PRI WITH MPRICE  
REPLACE TOT_BILL WITH MTOT_BILL
UNLOCK
RETURN
* EOF: SHORTBIL.PRG
*Formatted by: ToolBox Ver. 1.2  on 12/13/94 at 10:46 AM.
